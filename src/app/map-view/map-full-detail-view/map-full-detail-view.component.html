<div class="MapFullDetailView row">
    <div *ngIf="viewType=='poi' || viewType=='place' || viewType=='accessibility' || viewType=='municipality'"
         class="navigation-back clickable">
        <svg class="bi pulse" width="24" height="24" fill="#D04341">
            <use
                    xlink:href="/assets/bootstrap-icons/bootstrap-icons.svg#arrow-left-short"/>
        </svg>
        <span class="back" (click)="onBackToTrailPoiClick.emit()"
              *ngIf="selectedTrail">Torna al sentiero {{selectedTrail.code}}</span>
        <span class="back" (click)="onBackToTrailPoiClick.emit()" *ngIf="!selectedTrail">Vai alla lista sentieri</span>
    </div>

    <div *ngIf="viewType=='trail'"
         class="navigation-back clickable" (click)="showTrailList()">
        <svg class="bi pulse" width="24" height="24" fill="#D04341">
            <use
                    xlink:href="/assets/bootstrap-icons/bootstrap-icons.svg#arrow-left-short"/>
        </svg>
        <span class="back">Torna alla lista sentieri</span>
    </div>
</div>
<div class="row">
    <div class="col-11 offset-1" id="trail-detail-column"
         [class]="viewType=='trail' || viewType=='poi' || viewType=='place' || viewType=='accessibility' || viewType=='municipality' ? 'selection-margin' : ''">
        <div *ngIf="viewType=='' || viewType=='list'" class="row search-section top-margin-x2">
            <div class="col-11">
                <app-search-input placeholder="Cerca per codice sentiero, nome o localitÃ  (e.g: 100)"
                                  (onTypingChange)="onSearchKeyPress($event)"
                                  (onEnterPress)="onSearchClick()"
                >
                </app-search-input>
            </div>
            <div class="col-1 clickable">
                <svg class="bi" width="24" height="24" fill="#D04341" (click)="onSearchClick()">
                    <use
                            xlink:href="/assets/bootstrap-icons/bootstrap-icons.svg#search"/>
                </svg>
            </div>
        </div>
    </div>
</div>
<div *ngIf="viewType=='municipality' && selectedMunicipality" class="row top-margin">
    <app-municipality-details
            [selectedMunicipality] = "selectedMunicipality"
            [selectedLocationDetails] = "selectedLocationDetails"
            [trailMappings]="trailMappings"
            [trailsForMunicipality]="municipalityTrails"
            [trailsForMunicipalityMax] = "municipalityTrailsMax"
            [isPaginationToShow] = "false"
            (onLoadTrailPage)="loadTrailPreviewForMunicipality()"
            (onSelectTrailCode)="selectTrail($event)"
            (onNavigateToLocation)="navigateToLocation($event)"
    >
    </app-municipality-details>
</div>

<div *ngIf="viewType=='accessibility' && selectedNotification" class="row top-margin">
    <app-notification-details
            [selectedNotification]="selectedNotification"
            [trailMappings]="trailMappings"
    ></app-notification-details>
</div>

<div *ngIf="viewType=='poi' && selectedPoi" class="row top-margin">
    <app-poi-details
            [selectedPoi]="selectedPoi"
            [trailMappings]="trailMappings"
            (onSelectTrail)="onSelectTrail($event, false, true)"
            (onHighlightTrail)="onHighlightTrail($event)"
    ></app-poi-details>
</div>

<div *ngIf="viewType=='place' && selectedPlace" class="row top-margin">
    <app-place-details
            [selectedPlace]="selectedPlace"
            [trailMappings]="trailMappings"
            (onSelectTrail)="onSelectTrail($event, false, true)"
            (onHighlightTrail)="onHighlightTrail($event)"
    ></app-place-details>
</div>

<div *ngIf="viewType==''">
    <div class="row align-middle">
        <div class="col-12">
            <p>Per iniziare, naviga la mappa, ricerca un sentiero, oppure consulta la <span
                    class="clickable"
                    (click)="showTrailList()">lista di sentieri del {{sectionName}}</span>
            </p>
        </div>
        <div class="col-12">
            <button class="btn btn-primary full-width" (click)="showTrailList()">Lista sentieri
            </button>
        </div>
        <div class="col-md-12 top-margin-x2">
            <div class="row">
                <div class="map-icon offset-md-3 offset-sm-0"></div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="viewType=='list'" class="top-margin">
    <app-map-trail-list
            [trailsPreviewList]="trailPreviewList"
            (onSelectTrail)="onSelectTrail($event, true, true)"
    >
    </app-map-trail-list>
    <div class="pagination-position"
         *ngIf="trailPreviewList.length > 0 && !this.isSearch">
        <ngb-pagination
                [pageSize]="maxTrailEntriesPerPage"
                [collectionSize]="trailPreviewCount"
                [(page)]="trailPreviewPage"
                [size]="'sm'"
                [ellipses]="true"
                [maxSize]="2"
                aria-label="Default pagination"
                (pageChange)="onLoadTrailPreview.emit($event)"
        ></ngb-pagination>
    </div>
</div>
<div *ngIf="sideView=='trail'" class="top-margin">
    <app-map-trail-details
            [selectedTrail]="selectedTrail"
            [selectedTrailPois]="selectedTrailPois"
            [trailNotifications]="selectedTrailNotifications"
            [selectedTrailMaintenances]="selectedTrailMaintenances"
            [connectedTrails]="connectedTrails"
            [isCycloSwitchOn]="isCycloToggled"
            [isPoiLoaded]="isPoiLoaded"
            (onDownloadGpx)="onDownloadGpx.emit()"
            (onDownloadKml)="onDownloadKml.emit()"
            (onDownloadPdf)="onDownloadPdf.emit()"
            (toggleFullTrailPageEvent)="onToggleFullPageTrail.emit()"
            (toggleNotificationListEvent)="toggleNotificationsModal()"
            (onNavigateToLocation)="navigateToLocation($event)"
            (onShowLocation)="onSelectPlaceByRef.emit($event)"
            (onSelectTrail)="onSelectTrail($event, true, true)"
            (onNavigateToSelectedTrailCoordIndex)="navigateToSelectedTrailIndex($event)"
            (onNavigateToTrailReportIssue)="onNavigateToTrailReportIssue.emit($event)"
            (onSelectedNotification)="accessibilityNotificationSelection($event)"
            (onMaintenanceClick)="onMaintenanceClick.emit($event)"
            (onToggleModeClick)="onToggleMode()"
            (onPoiClickEvent)="poiClick($event)"
            (onPoiHoveringEvent)="poiHovering($event)"
            (onShowTrailClassificationCycloInfo)="onShowCyclingClassification.emit()"
            (onShowTrailClassificationHikingInfo)="onShowHikingClassification.emit()"
            (onHighlightTrail)="onHighlightTrail($event)"
            (onSelectMunicipality)="selectMunicipality($event)"
    >
    </app-map-trail-details>
</div>
